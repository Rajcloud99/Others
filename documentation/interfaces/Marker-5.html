<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>LMS-Lite documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">LMS-Lite documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">













<ol class="breadcrumb">
  <li>Interfaces</li>
  <li
  >
  Marker</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/modules/landmark/landmark-upsert/landmark-upsert.component.ts</code>
        </p>




        <section>
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#address" 
>
                                            address
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#dist" 
>
                                            dist
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#distUnit" 
>
                                            distUnit
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#draggable" 
>
                                            draggable
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#eta" 
>
                                            eta
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#etaUnit" 
>
                                            etaUnit
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#icon" 
>
                                            icon
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#label" 
>
                                            label
                                        </a>
                                </li>
                                <li>
                                        <a href="#lat" 
>
                                            lat
                                        </a>
                                </li>
                                <li>
                                        <a href="#lng" 
>
                                            lng
                                        </a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="address"></a>
                                        <span class="name "><b>address</b>
                                            <a href="#address">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>address:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="dist"></a>
                                        <span class="name "><b>dist</b>
                                            <a href="#dist">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>dist:     <code>number | string</code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code>number | string</code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="distUnit"></a>
                                        <span class="name "><b>distUnit</b>
                                            <a href="#distUnit">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>distUnit:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="draggable"></a>
                                        <span class="name "><b>draggable</b>
                                            <a href="#draggable">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>draggable:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="eta"></a>
                                        <span class="name "><b>eta</b>
                                            <a href="#eta">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>eta:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="etaUnit"></a>
                                        <span class="name "><b>etaUnit</b>
                                            <a href="#etaUnit">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>etaUnit:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="icon"></a>
                                        <span class="name "><b>icon</b>
                                            <a href="#icon">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>icon:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="label"></a>
                                        <span class="name "><b>label</b>
                                            <a href="#label">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>label:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="lat"></a>
                                        <span class="name "><b>lat</b>
                                            <a href="#lat">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>lat:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="lng"></a>
                                        <span class="name "><b>lng</b>
                                            <a href="#lng">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>lng:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import {Component, ElementRef, HostListener, Input, OnInit, Optional, ViewChild} from &#x27;@angular/core&#x27;;
import { ActivatedRoute, Router } from &#x27;@angular/router&#x27;;
import { StorageService } from &#x27;src/app/services/storage.service&#x27;;
import { MasterService } from &#x27;../../master.service&#x27;;
import { NzMarks } from &#x27;ng-zorro-antd/slider&#x27;;
import {FormBuilder, Validators} from &quot;@angular/forms&quot;;
import {CommonService} from &quot;../../../services/common.service&quot;;
// import { NzModalRef } from &#x27;ng-zorro-antd/modal&#x27;;
interface Marker {
  lat: number;
  lng: number;
  icon?: string;
  label?: string;
  eta?: string;
  address?: string;
  draggable?: boolean;
  etaUnit?: string;
  dist?: number | string;
  distUnit?: string;
}
@Component({
  selector: &#x27;app-landmark-upsert&#x27;,
  templateUrl: &#x27;./landmark-upsert.component.html&#x27;,
  styleUrls: [&#x27;./landmark-upsert.component.scss&#x27;]
})
export class LandmarkUpsertComponent implements OnInit {
  innerWidth: any;
  mode:any;
  showPause &#x3D; true;
  @Input() mod:any;// mode of popup from map view
  @HostListener(&quot;window: resize&quot;, [&quot;$event&quot;])
  onResize(event: any) {
    this.innerWidth &#x3D; window.innerWidth;
  }
  marks: NzMarks &#x3D; {
    0: &#x27;0&#x27; + &#x27;(-)&#x27;,
    30: &#x27;30&#x27;,
    50: &#x27;50&#x27;,
    100: &#x27;100&#x27; + &#x27;(+)&#x27;,
  };
  oFilter :any &#x3D;{};
  markers: any &#x3D; [];
  disabled: boolean &#x3D; false;
  LandmarkData: any;
  @ViewChild(&quot;address&quot;, { static: false })
  address!: ElementRef;
  map: any;
  zoom: number &#x3D; 6;
  marker: Marker &#x3D; {
    lat: 23.673858,
    lng: 83.815982,
  };
  lat: any &#x3D; 23.673858;
  lng: any &#x3D; 83.815982;
  device: any;
  Preview:boolean &#x3D;false;

  constructor(
    private route: ActivatedRoute,
    private router: Router,
    private common :CommonService,
    private masterService: MasterService,
    // @Optional() private modal: NzModalRef,
    private storageService: StorageService,
    private fb: FormBuilder,
  ) {
    this.route.params.subscribe((queryParam) &#x3D;&gt; {
      this.mode  &#x3D; queryParam.mode;
      if (this.mode) {
        const currentState &#x3D; this.router.getCurrentNavigation();
        if(this.mode &#x3D;&#x3D;&#x27;Preview&#x27;){
          this.LandmarkData &#x3D; currentState &amp;&amp; currentState.extras.state;
          this.Preview &#x3D; true;
        }else if(this.mode &#x3D;&#x3D;&#x27;Edit&#x27;){
          this.LandmarkData &#x3D; currentState &amp;&amp; currentState.extras.state;
          this.Preview &#x3D; false;
        } else if(this.mode &#x3D;&#x3D;&#x27;Add&#x27;) {
          this.Preview &#x3D; false;
        }

      }
    });
  }
  landmarkForm &#x3D; this.fb.group({
    name: [null, [Validators.required]],
    address: [null, [Validators.required]],
    latitude: [null, [Validators.required]],
    longitude: [null, [Validators.required]],
    dist:[null],
  });

  ngOnInit(): void {

    this.common.setNavTittleAndMenu(&quot;Landmark&quot;);
    this.innerWidth &#x3D; window.innerWidth;
    if(this.LandmarkData){
      this.fillFormdata(this.LandmarkData);
      this.drawRoute();
    }
  }
  onSubmit(){
    if(this.landmarkForm.invalid) {
      this.common.error(&#x27;all mandatory is required&#x27;);
      return;
    }
    if(this.landmarkForm.value.dist &amp;&amp; this.landmarkForm.value.dist &gt; 5000){
     return  this.common.error(&quot;radius should be less than or equal to 5000 meter&quot;);
    }
    let landmarkdt &#x3D;{
      name: this.landmarkForm.value.name,
      address: this.landmarkForm.value.address,
      created_at:this.LandmarkData?.created_at,
      location :{
        latitude:this.landmarkForm.value.latitude,
        longitude: this.landmarkForm.value.longitude
      },
      dist : this.landmarkForm.value.dist,
      type: &#x27;landmark&#x27;,
    }
      if(this.mode &#x3D;&#x3D; &#x27;Add&#x27; || this.mod &#x3D;&#x3D;&#x3D; &#x27;add&#x27;){
        this.masterService
          .AddlandMark(landmarkdt)
          .subscribe((data: any) &#x3D;&gt; {
            if (data) {
              if(data &amp;&amp; this.mod &#x3D;&#x3D;&#x3D; &#x27;add&#x27;) {
                // this.common.isDestroy(data);
              } else {
                this.router.navigateByUrl(&#x27;home/tracking/landmark&#x27;);
              }
            }
          });

    }else if(this.mode &#x3D;&#x3D; &#x27;Edit&#x27;){
      this.masterService
        .EditlandMark(this.LandmarkData?._id,landmarkdt)
        .subscribe((data: any) &#x3D;&gt; {
          if (data) {
            this.router.navigateByUrl(&#x27;home/tracking/landmark&#x27;);
          }
        });

    }



  }
  limitcheck(){
    //condition for checking radius max&#x3D;5 km or 5000 meter
    if(this.landmarkForm.value.dist &gt; 5000){
      this.common.error(&quot;radius should be less than or equal to 5000 meter&quot;);
    }
  }

  markerDragEnd($event: any) {
    console.log($event);
    let latitude &#x3D; $event.coords.lat;
    let longitude &#x3D; $event.coords.lng;
    this.landmarkForm.patchValue({latitude:latitude,longitude:longitude});
    if(this.markers &amp;&amp; this.markers.length){
      this.markers[0].lat &#x3D; latitude;
      this.markers[0].lng &#x3D; longitude;
    }else{
      this.markers.push({
        lat: latitude,
        lng: longitude,
      });
    }
    // this.getReverseGeocodingData(latitude,longitude);
  }
  // getReverseGeocodingData( lat:number,lng:number){
  //     let latlng &#x3D; new google.maps.LatLng(lat, lng);
  //     // This is making the Geocode request
  //     var geocoder &#x3D; new google.maps.Geocoder();
  //     geocoder.geocode({ location:latlng },  (results, status) &#x3D;&gt;{
  //       if (status !&#x3D;&#x3D; google.maps.GeocoderStatus.OK) {
  //         alert(status);
  //       }
  //       // This is checking to see if the Geoeode Status is OK before proceeding
  //       if (status &#x3D;&#x3D; google.maps.GeocoderStatus.OK) {
  //         console.log(results);
  //         var address &#x3D; (results[0].formatted_address);
  //         this.landmarkForm.patchValue({address:address,latitude:lat,longitude:lng});
  //       }
  //     });
  //
  //
  // }
  searchLocation(){
    if(this.address){
      let data &#x3D; this.address.nativeElement;
      this.landmarkForm.patchValue({
        address: data?.value,
        latitude: data?.location?.lat(),
        longitude: data?.location?.lng(),
      });
      this.markers&#x3D; [];
      this.markers.push({
        lat: this.landmarkForm.value.latitude,
        lng: this.landmarkForm.value.longitude,
      });
      this.setviewpostion(this.markers[0]);

    }
  }
  search(){
    if(!(this.address &amp;&amp; this.address.nativeElement &amp;&amp; this.address.nativeElement.location)){
      this.common.error(&#x27;Please search location&#x27;);
    }
  }
  fillFormdata(data:any) {
    this.landmarkForm.patchValue({
      name: data?.name,
      address: data?.address,
      latitude: data?.location?.latitude,
      longitude: data?.location?.longitude,
      dist :data?.dist
    });
  }

  drawRoute() {
    this.markers &#x3D; [];
    if (this.landmarkForm.value &amp;&amp; this.landmarkForm.value.latitude  &amp;&amp; this.landmarkForm.value.longitude) {
      this.markers.push({
        lat: this.landmarkForm.value.latitude,
        lng: this.landmarkForm.value.longitude,
      });
      this.setviewpostion(this.markers[0]);

    }
  }
  setviewpostion(marker: any){
    this.marker.lat &#x3D; marker?.lat;
    this.marker.lng &#x3D; marker?.lng;
    this.zoom&#x3D;16;
  }
}
</code></pre>
    </div>
</div>








                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'Marker-5.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
